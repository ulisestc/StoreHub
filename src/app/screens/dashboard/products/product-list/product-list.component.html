<div class="products-container">

  <header class="products-header">
    <div class="header-content">
      <h1>Gestión de Productos</h1>
      <p>Administra tu catálogo, precios y existencias</p>
    </div>
    <button mat-raised-button class="create-btn" routerLink="/dashboard/products/new">
      <mat-icon>add</mat-icon>
      Nuevo Producto
    </button>
  </header>

  <div class="table-container mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Producto </th>
        <td mat-cell *matCellDef="let prod" class="name-cell">
          <div class="cell-content">
            <span class="product-name">{{prod.name}}</span>
            <span class="product-category">{{prod.category}}</span>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="sku">
        <th mat-header-cell *matHeaderCellDef> SKU </th>
        <td mat-cell *matCellDef="let prod" class="sku-cell">
          <span class="sku-badge">{{prod.sku}}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Precio </th>
        <td mat-cell *matCellDef="let prod" class="price-cell">
          {{prod.price | currency}}
        </td>
      </ng-container>

      <ng-container matColumnDef="stock">
        <th mat-header-cell *matHeaderCellDef> Stock </th>
        <td mat-cell *matCellDef="let prod" class="stock-cell">
          <span [class.low-stock]="prod.stock <= 5">
            {{prod.stock}} u.
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef> Estado </th>
        <td mat-cell *matCellDef="let prod" class="status-cell">
          <span class="status-badge" [class.active]="prod.estado === 'activo'" [class.inactive]="prod.estado === 'inactivo'">
            {{prod.estado | titlecase}}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef class="actions-header"> Acciones </th>
        <td mat-cell *matCellDef="let prod" class="actions-cell">
          <div class="actions-wrapper">
            <button mat-icon-button color="primary"
                    [routerLink]="['/dashboard/products/edit', prod.id]"
                    matTooltip="Editar producto">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn"
                    (click)="openDeleteDialog(prod.id)"
                    matTooltip="Eliminar producto">
              <mat-icon>delete_outline</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="data-row"></tr>

    </table>

    <div *ngIf="dataSource.length === 0" class="empty-state">
      <mat-icon>inventory</mat-icon>
      <p>No hay productos registrados.</p>
    </div>
  </div>

</div>
